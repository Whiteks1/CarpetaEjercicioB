<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <title>Juego del Número Oculto</title>
</head>

<body>
    <div class="container">
        <section class="row">
            <header>
                <h1 class="text-center bg-warning-subtle text-warning-emphasis p-5">Adivina el Número Oculto</h1>
            </header>
        </section>
        <section class="row">
            <div class="col-12 col-md8 offset-md-2 col-xl-4 offset-4">

                <div class="d-flex align-items-center justify-content-between gap-2">
                    <div class="bg-warning-subtle p-2 rounded w-50">
                        <div class="form-floating mb-3">
                            <input type="number" id="in_intentos" class="form-control" placeholder="Escribe tu prueba"
                                min="1" max="5">
                            <label for="in_intentos">Número de intentos</label>
                        </div>
                        <div class="d-flex justify-content-end">
                            <button type="button" class="btn btn-light" id="btn_iniciar">Comenzar</button>
                        </div>
                    </div>
                    <div class="bg-warning p-2 rounded d-flex w-25 align-items-center">
                        <div class="form-floating mb-3">
                            <input type="number" id="in_numero" disabled
                                class="form-control fs-1 h-auto text-center text-warning-emphasis"
                                placeholder="Introduce un Número" size="1" maxlength="1">
                            <label for="in_numero">Número</label>
                        </div>
                    </div>
                    <button class="btn btn-danger" id="btn_reiniciar">Reiniciar</button>
                </div>
                <div class="alert alert-light mt-4" id="mensajes">
                    <h4 class="alert-heading">Adivina el número oculto</h4>
                    <div id="reglas">
                        <ul class="list-group">
                            <li class="list-group-item list-group-item-warning">Introduce el número de fallos permitido
                                y pulsa en jugar</li>
                            <li class="list-group-item list-group-item-warning">Tienes que adivinar el número oculto
                                (entre 1 y 100) tecleando un valor en el input</li>
                            <li class="list-group-item list-group-item-warning">Si la diferencia entre tu número y el
                                oculto es mayor de 15 recibirás un mensaje "demasiado alto" o "demasiado bajo"</li>
                            <li class="list-group-item list-group-item-warning">Si es menor de 15 el mensaje será "alto"
                                o "bajo"</li>
                        </ul>
                    </div>
                </div>
                <div class="card mt-4">
                    <h3 class="text-center card-header">Estado</h3>
                    <div id="info_estado" class="mt-2">
                        <p class="fs-5 d-flex gap-4 mx-4 bg-danger-subtle text-danger-emphasis"><span id="out_total"
                                class="badge text-bg-danger">85</span>Número demasiado alto</p>
                        <p class="fs-5 d-flex gap-4 mx-4 bg-warning-subtle text-warning-emphasis"><span id="out_total"
                                class="badge text-bg-warning">60</span>Número un poco alto</p>
                        <p class="fs-5 d-flex gap-4 mx-4 bg-info-subtle text-info-emphasis"><span id="out_total"
                                class="badge text-bg-info">40</span>Número un poco bajo</p>
                        <p class="fs-5 d-flex gap-4 mx-4 bg-primary-subtle text-primary-emphasis"><span id="out_total"
                                class="badge text-bg-primary">25</span>Número demasiado bajo</p>
                        <p class="fs-5 d-flex gap-4 mx-4 bg-success-subtle text-success-emphasis"><span id="out_total"
                                class="badge text-bg-success">50</span>Número correcto</p>
                    </div>
                </div>

            </div>
        </section>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
    <script src="biblioteca.js"></script>
    <script>
        //CONSTANTES DEL DOM
        const marcador_intentos = document.querySelector('#in_intentos');
        const marcador_numero = document.querySelector('#in_numero');
        const btn_iniciar = document.querySelector('#btn_iniciar');
        const btn_reiniciar = document.querySelector('#btn_reiniciar');
        const cuadro_mensajes = document.querySelector('#mensajes');
        const cuadro_estado = document.querySelector('#info_estado');

        //VARIABLES de APLICACIÓN
        let numero_oculto = 0;
        let tope_max = 0;
        let tope_min = 0;
        let numero_intro = 0;
        let salida = '';
        let errores = 0;

        //FUNCIONES
        function preparaJuego() {
            if (!marcador_intentos.value >= 1) {
                //mensaje
                return;
            }
            //ocultar cuadro mensajes
            configuraMensaje(false);
            //calcular número oculto
            numero_oculto = aleatorioEntre(1, 100);
            //establecer valores variables
            estableceValores();
            //habilitar modo juego
            modoJuego(true);

        }
        function estableceValores() {
            tope_max = numero_oculto + 15;
            tope_min = numero_oculto - 15;
            errores = parseInt(marcador_intentos.value);
            console.log(numero_oculto, tope_max, tope_min, errores)
        }
        function configuraMensaje(visible, titulo, cuerpo, formato) {
            if (visible) {
                cuadro_mensajes.classList.remove('d-none');
            } else {
                cuadro_mensajes.classList.add('d-none');
                cuadro_mensajes.querySelector('#reglas').className = 'd-none';
            }
        }
        function modoJuego(modo) {
            marcador_intentos.disabled = modo;
            marcador_numero.disabled = !modo;
            btn_iniciar.disabled = modo;
            /*if (modo) {// forma 
                marcador_intentos.disabled = true;
                marcador_numero.disabled = false;
                btn_iniciar.disabled = true;
            }*/
        }

        //ASIGNACIONES
        btn_iniciar.onclick = preparaJuego;
        btn_reiniciar.onclick = function (){}
    </script>
</body>

</html>